"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.eqCellNull=eqCellNull,exports.handleFieldOrColumn=handleFieldOrColumn,exports.getColMinWidth=getColMinWidth,exports.getOffsetSize=getOffsetSize,exports.calcTreeLine=calcTreeLine,exports.mergeBodyMethod=mergeBodyMethod,exports.clearTableDefaultStatus=clearTableDefaultStatus,exports.clearTableAllStatus=clearTableAllStatus;var _vXETable=_interopRequireDefault(require("../../v-x-e-table")),_xeUtils=_interopRequireDefault(require("xe-utils"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function eqCellNull(e){return""===e||_xeUtils.default.eqNull(e)}var lineOffsetSizes={mini:3,small:2,medium:1};function getPaddingLeftRightSize(e){if(e){e=getComputedStyle(e);return _xeUtils.default.toNumber(e.paddingLeft)+_xeUtils.default.toNumber(e.paddingRight)}return 0}function getElemenMarginWidth(e){if(e){var t=getComputedStyle(e),l=_xeUtils.default.toNumber(t.marginLeft),t=_xeUtils.default.toNumber(t.marginRight);return e.offsetWidth+l+t}return 0}function handleFieldOrColumn(e,t){return t?_xeUtils.default.isString(t)?e.getColumnByField(t):t:null}function queryCellElement(e,t){return e.querySelector(".vxe-cell"+t)}function getColMinWidth(e){var t=e.$table,l=e.column,r=e.cell,i=t.showHeaderOverflow,n=t.resizableOpts.minWidth;if(n){var a=_xeUtils.default.isFunction(n)?n(e):n;if("auto"!==a)return Math.max(1,_xeUtils.default.toNumber(a))}t=l.showHeaderOverflow,e=_xeUtils.default.isUndefined(t)||_xeUtils.default.isNull(t)?i:t,n="title"===e||(!0===e||"tooltip"===e)||"ellipsis"===e,a=_xeUtils.default.floor(1.6*(_xeUtils.default.toNumber(getComputedStyle(r).fontSize)||14))+(getPaddingLeftRightSize(r)+getPaddingLeftRightSize(queryCellElement(r,"")));return n&&(l=getPaddingLeftRightSize(queryCellElement(r,"--title>.vxe-cell--checkbox")),i=getElemenMarginWidth(queryCellElement(r,">.vxe-cell--required-icon")),t=getElemenMarginWidth(queryCellElement(r,">.vxe-cell--edit-icon")),e=getElemenMarginWidth(queryCellElement(r,">.vxe-cell-help-icon")),n=getElemenMarginWidth(queryCellElement(r,">.vxe-cell--sort")),a+=l+i+t+e+getElemenMarginWidth(queryCellElement(r,">.vxe-cell--filter"))+n),a}function countTreeExpand(e,t){var l=t.$table,r=e[l.treeOpts.children],i=1;if(l.isTreeExpandByRow(e))for(var n=0;n<r.length;n++)i+=countTreeExpand(r[n],t);return i}function getOffsetSize(e){return lineOffsetSizes[e.vSize]||0}function calcTreeLine(e,t){var l=e.$table,r=e.$rowIndex,i=1;return r&&(i=countTreeExpand(t[r-1],e)),l.rowHeight*i-(r?1:12-getOffsetSize(l))}function mergeBodyMethod(e,t,l){for(var r=0;r<e.length;r++){var i=e[r],n=i.row,a=i.col,u=i.rowspan,i=i.colspan;if(-1<a&&-1<n&&u&&i){if(n===t&&a===l)return{rowspan:u,colspan:i};if(n<=t&&t<n+u&&a<=l&&l<a+i)return{rowspan:0,colspan:0}}}}function clearTableDefaultStatus(e){return e.initStatus=!1,e.clearSort(),e.clearCurrentRow(),e.clearCurrentColumn(),e.clearRadioRow(),e.clearRadioReserve(),e.clearCheckboxRow(),e.clearCheckboxReserve(),e.clearRowExpand(),e.clearTreeExpand(),e.clearTreeExpandReserve(),e.clearActived&&_vXETable.default._edit&&e.clearActived(),e.clearSelected&&(e.keyboardConfig||e.mouseConfig)&&e.clearSelected(),e.clearCellAreas&&e.mouseConfig&&(e.clearCellAreas(),e.clearCopyCellArea()),e.clearScroll()}function clearTableAllStatus(e){return e.clearFilter&&_vXETable.default._filter&&e.clearFilter(),clearTableDefaultStatus(e)}